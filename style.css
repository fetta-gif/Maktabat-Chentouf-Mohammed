/* --- START OF FILE style.css --- */

:root {
    /* ألوان قابلة للتعديل - حالياً تستخدم الأخضر كلون أساسي */
    --bg-color: #f0f0f0;       /* لون الخلفية العام (رمادي فاتح جداً) */
    --container-bg: #ffffff;    /* لون خلفية الحاوية الرئيسية (أبيض) */
    --chat-bg: #f9f9f9;        /* لون خلفية منطقة الدردشة (أبيض مائل للرمادي) */
    --text-color: #333333;     /* لون النص الأساسي (رمادي غامق) */
    --input-bg: #ffffff;       /* لون خلفية حقل الإدخال (أبيض) */
    --border-color: #d0d0d0;   /* لون الحدود (رمادي فاتح) */
    --accent-color: #28a745;   /* اللون المميز (أخضر - يمكن تغييره للمكتبة مثلاً إلى أزرق #007bff) */
    --hover-color: #218838;    /* لون التمرير فوق اللون المميز (أخضر داكن - يتغير مع تغيير --accent-color) */
    --bot-message-bg: #e6f7eb; /* لون خلفية رسالة البوت (أخضر فاتح - يتغير مع تغيير --accent-color) */
    --user-message-bg: #ffffff; /* لون خلفية رسالة المستخدم (أبيض) */
    --link-color: #007bff;     /* لون الروابط (أزرق) */
    --link-hover-color: #0056b3;/* لون الروابط عند التمرير */
    --error-message-bg: #f8d7da; /* لون خلفية رسائل الخطأ (اختياري) */
    --error-text-color: #721c24; /* لون نص رسائل الخطأ (اختياري) */
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* استخدام خط مناسب للغة العربية والإنجليزية */
    font-family: 'Tahoma', 'Segoe UI', Geneva, Verdana, sans-serif;
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh; /* ضمان امتداد الجسم على كامل ارتفاع الشاشة */
    display: flex;
    flex-direction: column;
    justify-content: center; /* توسيط الحاوية عمودياً */
    align-items: center;     /* توسيط الحاوية أفقياً */
    direction: rtl;          /* ضبط اتجاه النص من اليمين لليسار */
    padding: 10px;           /* هوامش صغيرة حول الحاوية على الشاشات الكبيرة */
    margin: 0;
}

.container {
    width: 100%;             /* عرض كامل متاح */
    max-width: 700px;        /* تحديد عرض أقصى للحاوية */
    height: 90vh;            /* ارتفاع يملأ معظم الشاشة */
    max-height: 800px;       /* تحديد ارتفاع أقصى */
    background-color: var(--container-bg);
    border-radius: 15px;     /* حواف دائرية */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* ظل خفيف */
    display: flex;
    flex-direction: column;  /* ترتيب العناصر بشكل عمودي */
    overflow: hidden;        /* إخفاء أي محتوى يتجاوز الحاوية */
}

h1 {
    text-align: center;
    padding: 15px 20px;
    color: #ffffff;          /* لون نص العنوان أبيض */
    background-color: var(--accent-color); /* استخدام اللون المميز للخلفية */
    margin: 0;
    font-size: 1.4em;       /* حجم خط العنوان */
    flex-shrink: 0;         /* منع العنوان من التقلص */
    border-top-left-radius: 15px; /* مطابقة حواف الحاوية */
    border-top-right-radius: 15px;
}

.chat-container {
    flex: 1;                 /* السماح لهذا العنصر بأخذ المساحة المتبقية */
    display: flex;
    flex-direction: column;
    overflow: hidden;        /* مهم لمنع تجاوز المحتوى */
    position: relative;      /* لتحديد موضع العناصر الداخلية المطلقة */
}

.chat-header {
    padding: 10px 15px;
    background-color: var(--chat-bg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-start; /* محاذاة زر الحذف لليسار (لأن الواجهة RTL) */
    flex-shrink: 0;          /* منع التقلص */
}

.clear-btn {
    background-color: var(--accent-color);
    color: white;
    border: none;
    padding: 8px 15px;      /* تصغير الحشو قليلاً */
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;              /* مسافة بين الأيقونة والنص */
    font-size: 0.9em;      /* تصغير حجم الخط قليلاً */
}

.clear-btn:hover {
    background-color: var(--hover-color);
}

.clear-btn i {
    font-size: 1em;        /* حجم الأيقونة */
}

#chat-messages {
    flex: 1;                 /* يأخذ المساحة المتبقية */
    overflow-y: auto;        /* إضافة شريط تمرير عمودي عند الحاجة */
    padding: 20px;
    background-color: var(--chat-bg);
    display: flex;
    flex-direction: column-reverse; /* لعرض أحدث رسالة في الأسفل */
    gap: 15px;               /* مسافة بين الرسائل */
}

/* يجعل شريط التمرير أنعم */
#chat-messages::-webkit-scrollbar {
    width: 8px;
}
#chat-messages::-webkit-scrollbar-track {
    background: var(--chat-bg);
    border-radius: 4px;
}
#chat-messages::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 4px;
    border: 2px solid var(--chat-bg); /* لإعطاء حافة حول المقبض */
}
#chat-messages::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent-color);
}


.message {
    padding: 12px 18px;     /* حشو داخلي للرسائل */
    border-radius: 18px;     /* حواف دائرية أكثر */
    max-width: 85%;          /* أقصى عرض للرسالة */
    width: fit-content;      /* عرض الرسالة يتناسب مع محتواها */
    line-height: 1.6;        /* تباعد الأسطر */
    font-size: 0.95em;       /* حجم خط الرسالة */
    position: relative;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08); /* ظل خفيف جداً */
    word-wrap: break-word;   /* كسر الكلمات الطويلة */
    overflow-wrap: break-word;
}

.bot-message {
    background-color: var(--bot-message-bg);
    color: var(--text-color); /* تأكد من وضوح النص */
    margin-right: auto;      /* محاذاة لليسار (لأن الواجهة RTL) */
    border-bottom-right-radius: 4px; /* زاوية حادة صغيرة */
    align-self: flex-start;  /* التأكيد على المحاذاة */
}

.user-message {
    background-color: var(--user-message-bg);
    color: var(--text-color);
    margin-left: auto;       /* محاذاة لليمين */
    border: 1px solid var(--border-color);
    border-bottom-left-radius: 4px; /* زاوية حادة صغيرة */
    align-self: flex-end;   /* التأكيد على المحاذاة */
}

/* تنسيق خاص لرسائل الخطأ */
.error-message {
    background-color: var(--error-message-bg) !important; /* استخدام important لضمان التطبيق */
    color: var(--error-text-color) !important;
    border: 1px solid var(--error-text-color);
}


/* تنسيق الفقرات داخل الرسائل */
.message p {
    margin: 0 0 10px 0; /* مسافة سفلية بين الفقرات */
    padding: 0;
    text-align: right; /* محاذاة النص لليمين */
    line-height: 1.7;
}
.message p:last-child {
    margin-bottom: 0; /* إزالة المسافة السفلية لآخر فقرة */
}

/* تنسيق العناوين داخل الرسائل */
.message h1, .message h2, .message h3, .message h4, .message h5, .message h6 {
    font-weight: 600;
    margin-top: 10px;
    margin-bottom: 8px;
    line-height: 1.4;
}
.message h1:first-child, .message h2:first-child, .message h3:first-child {
    margin-top: 0;
}

.message strong {
    font-weight: 600; /* جعل النص السميك أكثر وضوحًا */
}

/* تنسيق القوائم */
.message ul, .message ol {
    margin: 8px 20px 12px 0; /* هامش لليمين للقوائم في RTL */
    padding-right: 15px; /* حشو إضافي لليمين */
}
.message li {
    margin-bottom: 6px;
    line-height: 1.6;
}
.message li:last-child {
    margin-bottom: 0;
}

/* تنسيق الروابط */
.message a {
    color: var(--link-color);
    text-decoration: underline;
    text-underline-offset: 3px; /* تعديل مسافة الخط السفلي */
    transition: color 0.2s ease;
}
.message a:hover {
    color: var(--link-hover-color);
}

/* تنسيق الكود المضمن */
.message code {
    background-color: rgba(0, 0, 0, 0.06);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9em;
    direction: ltr; /* الكود عادة يكون من اليسار لليمين */
    display: inline-block; /* لمنع مشاكل المحاذاة */
}

/* تنسيق الاقتباسات */
.message blockquote {
    border-right: 4px solid var(--accent-color); /* حد على اليمين في RTL */
    border-left: none; /* إزالة الحد الأيسر */
    margin: 12px 0;
    padding: 10px 15px 10px 10px; /* تعديل الحشو لـ RTL */
    background-color: rgba(0, 0, 0, 0.04);
    border-radius: 4px;
    font-style: italic;
}

/* تنسيق حاوية الإدخال */
.input-container {
    padding: 15px;
    background-color: #ffffff; /* جعل خلفية الإدخال بيضاء دائمًا */
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;               /* مسافة بين حقل الإدخال والزر */
    flex-shrink: 0;          /* منع التقلص */
    align-items: center;     /* محاذاة العناصر عمودياً */
}

#user-input {
    flex-grow: 1;            /* يأخذ المساحة المتبقية */
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 25px;     /* حواف دائرية لحقل الإدخال */
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1em;
    outline: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

#user-input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.2); /* ظل خفيف عند التركيز (يتغير مع --accent-color) */
}

.send-btn {
    background-color: var(--accent-color);
    color: white;
    border: none;
    width: 45px;             /* حجم أكبر قليلاً للزر */
    height: 45px;
    border-radius: 50%;      /* زر دائري */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease, transform 0.1s ease;
    flex-shrink: 0;          /* منع التقلص */
}

.send-btn:hover {
    background-color: var(--hover-color);
}

.send-btn:active {
    transform: scale(0.95); /* تأثير ضغط بسيط عند النقر */
}

.send-btn i {
    font-size: 1.1em;         /* حجم أيقونة الإرسال */
    margin-left: -2px;        /* تعديل بسيط لموضع الأيقونة في الزر الدائري */
}

/* تنسيق مؤشر الكتابة */
.typing-indicator {
    max-width: 80px !important; /* عرض أصغر للمؤشر */
    margin: 10px auto 10px 0; /* محاذاة لليسار في RTL */
    padding: 10px 15px !important; /* حشو داخلي */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--bot-message-bg) !important; /* التأكيد على لون الخلفية */
    border-radius: 18px !important; /* مطابقة حواف الرسائل */
    opacity: 0.9;
    align-self: flex-start !important; /* التأكيد على المحاذاة */
}

.typing-dots {
    display: flex;
    gap: 5px;
}

.typing-dots span {
    width: 8px;              /* حجم أكبر للنقاط */
    height: 8px;
    background-color: var(--accent-color); /* استخدام اللون المميز */
    border-radius: 50%;
    animation: typingAnimation 1.4s infinite ease-in-out;
    opacity: 0.6;
}

.typing-dots span:nth-child(1) { animation-delay: 0.0s; }
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }

/* تحريك نقاط الكتابة */
@keyframes typingAnimation {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.6;
    }
    30% {
        transform: translateY(-5px); /* حركة للأعلى */
        opacity: 1;
    }
}


/* تنسيق إشعار النسخة التجريبية */
.development-notice {
    color: var(--text-color);
    text-align: center;
    font-size: 0.75em;      /* حجم خط صغير */
    opacity: 0.6;
    padding: 8px;
    background-color: var(--chat-bg); /* نفس خلفية منطقة الدردشة */
    border-bottom-left-radius: 15px; /* مطابقة حواف الحاوية */
    border-bottom-right-radius: 15px;
    flex-shrink: 0;         /* منع التقلص */
}
.development-notice i {
    margin-left: 5px;      /* مسافة لليسار للأيقونة (في RTL) */
    vertical-align: middle;
}


/* التجاوب مع الشاشات الصغيرة (Mobile Responsiveness) */
@media (max-width: 768px) {
    body {
        padding: 0; /* إزالة الحشو حول الحاوية */
    }

    .container {
        width: 100%;          /* عرض كامل */
        height: 100vh;         /* ارتفاع كامل */
        max-height: none;      /* إلغاء الارتفاع الأقصى */
        border-radius: 0;      /* إزالة الحواف الدائرية */
        box-shadow: none;      /* إزالة الظل */
        max-width: none;       /* إلغاء العرض الأقصى */
    }

    h1 {
        padding: 12px 15px;    /* تقليل الحشو */
        font-size: 1.2em;     /* تقليل حجم الخط */
        border-radius: 0;      /* إزالة الحواف الدائرية */
    }

    #chat-messages {
        padding: 15px 10px;    /* تقليل الحشو الجانبي */
        gap: 12px;             /* تقليل المسافة بين الرسائل */
    }

    .input-container {
        padding: 10px;         /* تقليل الحشو */
    }

    .message {
        max-width: 90%;        /* زيادة أقصى عرض للرسالة قليلاً */
        padding: 10px 15px;    /* تعديل الحشو */
        font-size: 0.9em;      /* تقليل حجم الخط قليلاً */
    }

     #user-input {
        padding: 10px 15px;
        font-size: 0.95em;
    }

    .send-btn {
        width: 40px;
        height: 40px;
    }
     .send-btn i {
        font-size: 1em;
    }

    .clear-btn {
         padding: 6px 12px;
         font-size: 0.85em;
    }

    .development-notice {
         border-radius: 0; /* إزالة الحواف */
         font-size: 0.7em;
    }
}

/* --- END OF FILE style.css --- */